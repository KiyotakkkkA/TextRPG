# Предлагаемые улучшения игры

Этот документ содержит идеи по улучшению игровой механики и структуры данных для мира "Осколки Кристалла".

## Улучшения механик

### Система элементальных взаимодействий

- Добавить систему элементальных взаимодействий, где элементы могут усиливать или ослаблять друг друга
- Например: огонь сильнее против льда, но слабее против воды
- Добавить возможность комбинирования элементов для создания составных эффектов

### Система фракций и репутации

- Реализовать систему отслеживания репутации игрока с различными фракциями
- Действия игрока влияют на отношение фракций к нему
- Разные уровни репутации открывают доступ к уникальным квестам, торговцам и локациям

### Система крафта с использованием осколков

- Расширить существующую систему крафта добавлением осколков как компонентов
- Осколки разных элементов придают предметам разные свойства
- Качество и размер осколка влияет на силу эффекта

### Система стабильности осколков

- Ввести механику стабильности для мощных предметов с осколками
- Нестабильные предметы могут иметь побочные эффекты или ломаться
- Добавить навык "Кристаллография" для стабилизации предметов

## Улучшения структуры данных

### Расширение JSON-структуры для монстров

```json
{
  "monster_id": {
    "elemental_type": "fire", // Добавление элементального типа
    "transformation_level": 2, // Уровень искажения осколками
    "special_drops": {
      "fire_shard": {
        // Особые предметы, связанные с осколками
        "chance": 0.1,
        "condition": "player_has_skill_crystal_sensing_3"
      }
    },
    "environment_effects": {
      // Влияние монстра на окружающую среду
      "radius": 3,
      "effect": "temperature_increase",
      "value": 10
    }
  }
}
```

### Расширение JSON-структуры для локаций

```json
{
  "location": {
    "crystal_influence": {
      "type": "fire", // Тип осколка, влияющего на локацию
      "intensity": 3, // Интенсивность влияния (1-5)
      "effects": {
        // Эффекты, которые действуют в этой локации
        "fire_damage_over_time": {
          "damage": 2,
          "interval": 30,
          "condition": "player_fire_resistance_below_20"
        },
        "fire_spell_boost": {
          "value": 15,
          "condition": "player_has_fire_affinity"
        }
      }
    },
    "dynamic_events": [
      // События, которые могут произойти в локации
      {
        "id": "crystal_storm",
        "trigger": "time_of_day_dusk",
        "chance": 0.2,
        "effects": {
          /* ... */
        }
      }
    ]
  }
}
```

### Расширение JSON-структуры для навыков

```json
{
  "skill": {
    "crystal_requirements": {
      // Взаимодействие навыка с типами кристаллов
      "fire_affinity": {
        "bonus_per_level": 2,
        "max_bonus": 10
      }
    },
    "synergies": [
      // Синергии с другими навыками
      {
        "skill_id": "elemental_magic",
        "bonus_type": "cooldown_reduction",
        "value": 5
      }
    ]
  }
}
```

### Расширение JSON-структуры для предметов

```json
{
  "item": {
    "crystal_slots": 2, // Количество слотов для вставки осколков
    "embedded_crystals": [
      // Уже вставленные осколки
      {
        "type": "fire",
        "quality": "flawless",
        "effects": {
          /* ... */
        }
      }
    ],
    "stability": 85, // Стабильность предмета (0-100)
    "instability_effects": {
      // Что происходит при нестабильности
      "threshold": 30,
      "effect": "random_fire_damage",
      "severity": "moderate"
    }
  }
}
```

## Игровой контент для добавления

### Новые типы существ

- **Кристальные конструкты** - искусственные существа, созданные с использованием осколков
- **Элементальные симбионты** - животные с прикрепленными к ним осколками, дающими особые способности
- **Осколочные аберрации** - существа, полностью трансформированные энергией осколков

### Уникальные механики сражений с боссами

- Создать боссов с фазами, меняющимися в зависимости от элементального типа используемого оружия
- Добавить механику поглощения силы осколков от побежденных боссов
- Реализовать групповые сражения, где требуется координация нескольких типов элементальной магии

### Система погоды и элементальных явлений

- Создать динамическую систему погоды, зависящую от концентрации осколков в регионе
- Реализовать элементальные бури и аномалии, влияющие на характеристики и возможности игрока

### Новые игровые активности

- **Кристальная охота** - поиск редких типов осколков в определенных местах и условиях
- **Стабилизация разломов** - миссии по устранению опасных кристальных аномалий
- **Исследование руин** - изучение древних сооружений в поисках знаний о Великом Кристалле

## Технические улучшения

- Оптимизировать загрузку ресурсов при переходе между локациями с разными элементальными влияниями
- Улучшить отображение эффектов от осколков (визуальные эффекты, звуки)
- Добавить систему профилирования для отслеживания прогресса игрока в различных аспектах (собранные типы осколков, побежденные существа и т.д.)

## Навыки

### Доработка системы навыков (2023-10-10)

1. **Загрузка из поддиректорий**

   - Обновлен метод `load_skills` в классе `SkillSystem`, чтобы он рекурсивно обходил все поддиректории и загружал навыки из всех JSON-файлов.
   - Добавлена информативная статистика о количестве обработанных файлов и загруженных навыков.

2. **Поддержка бонусов навыков**

   - Реализована полная поддержка поля `provides` в JSON-файлах навыков, которое определяет бонусы, предоставляемые каждым уровнем навыка.
   - Добавлен механизм хранения и управления бонусами в классе `Skill`.
   - Реализованы методы для автоматического обновления бонусов при повышении уровня навыка.

3. **Интеграция бонусов в игровую механику**

   - Добавлены методы в класс `Player` для получения и суммирования бонусов от всех навыков.
   - Обновлен расчет боевого урона с учетом бонусов навыков.
   - Реализована поддержка специальных бонусов для разных типов оружия.

4. **Улучшены методы отображения информации**
   - Добавлены подробные методы для отображения информации о навыках, текущих и будущих бонусах.
   - Реализован прогресс-бар для наглядного отображения прогресса до следующего уровня.
   - Добавлена возможность просмотра списка всех навыков и детальной информации о конкретном навыке.

Эти изменения значительно улучшают функциональность системы навыков, делая их более полезными и интегрированными в игровую механику. Теперь каждый уровень навыка не только разблокирует новые предметы, но и предоставляет игроку различные бонусы, влияющие на его боевые и другие характеристики.
